# M5Paper JPG ビューア

このArduinoスケッチは、M5Paper電子ペーパーディスプレイでSDカードからJPG画像を表示することができます。

## 前提条件

このスケッチを使用する前に、必要なライブラリとボードサポートでArduino IDEをセットアップする必要があります：

1. **Arduino IDEのインストール**: まだインストールしていない場合は、[Arduino IDE](https://www.arduino.cc/en/software)をダウンロードしてインストールしてください。

2. **ESP32ボードサポートのインストール**:
   - Arduino IDEを開く
   - ファイル > 環境設定 を選択
   - 「追加のボードマネージャのURL」フィールドに以下のURLを追加：
     ```
     https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
     ```
   - ツール > ボード > ボードマネージャ を選択
   - 「esp32」を検索し、「ESP32 by Espressif Systems」をインストール

3. **必要なライブラリのインストール**:
   - スケッチ > ライブラリをインクルード > ライブラリを管理 を選択
   - 以下のライブラリを検索してインストール：
     - 「M5EPD」（M5Stack提供、M5Paperサポート用）

## ハードウェアのセットアップ

1. SDカードをFAT32形式にフォーマット
2. JPG画像をSDカードのルートディレクトリにコピー
3. SDカードをM5PaperのSDカードスロットに挿入
4. M5PaperをUSBでコンピュータに接続

## スケッチのアップロード

1. Arduino IDEで`M5Paper_JPG_Viewer.ino`ファイルを開く
2. 正しいボードを選択：
   - ツール > ボード > ESP32 Arduino > M5Stack-Paper
3. 正しいポートを選択：
   - ツール > ポート > （M5Paperが接続されているCOMポートを選択）
4. アップロードボタン（右矢印アイコン）をクリック

## JPGビューアの使用方法

スケッチがM5Paperにアップロードされると：

1. デバイスは自動的にSDカードからJPGファイルをスキャン
2. 最初に見つかったJPGファイルが表示される
3. M5Paperのボタンを使って画像間を移動：
   - 左ボタン：前の画像
   - 右ボタン：次の画像

## カスタマイズ

スケッチを変更して様々な側面を変更できます：

- `DIRECTORY_PATH`：SDカードの特定のディレクトリでJPGファイルを探したい場合に変更
- `MAX_FILES`：50以上のJPGファイルがある場合は増やす
- 画面の回転：必要に応じて`M5.EPD.SetRotation(1)`の行を変更（0=通常、1=時計回りに90°、2=180°、3=時計回りに270°）

## トラブルシューティング

- 画像が表示されない場合は、JPGファイルがSDカードのルートディレクトリにあることを確認
- JPGファイルの拡張子が`.jpg`または`.jpeg`であることを確認（大文字小文字は区別しません）
- SDカードが認識されない場合は、FAT32に再フォーマットしてみる
- M5Paperが正しく電源が入っていて接続されていることを確認

## 注意事項

- M5Paperは電子ペーパーディスプレイを搭載しており、更新が遅いです。画像間を移動する際は少し待ってください。
- 大きなJPGファイルは読み込みと表示に時間がかかる場合があります。
- ディスプレイの下部に現在のファイルパスとナビゲーション情報が表示されます。

## 機能

- SDカードからのJPGファイルのスキャン（サブディレクトリを含む）
- ボタンを使った画像ナビゲーション
- 画像を右に90度回転して表示
- バッテリーレベルとファイル情報の表示
- より良い画質のための異なるリフレッシュモードのサポート
- シリアルデバッグ出力によるトラブルシューティングのサポート
